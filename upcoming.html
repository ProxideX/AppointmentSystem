<!-- File: upcoming.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Upcoming Appointments - Uni Bookings</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    
    body { font-family: Arial, sans-serif; background: #1c1c1c; padding: 24px; }
    h2 { margin-bottom: 16px; color: white; }
    table { width: 100%; border-collapse: collapse; background: #444; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    th, td { padding: 12px; border: 1px solid #444; text-align: left; color: white;}
    th { background: #1c1c1c; color: #bbb; }
    button { padding: 6px 12px; border: none; border-radius: 4px; cursor: pointer; }
    .view-btn { background: #1c1c1c; color: #fff; }
    .doc-link { color: #10B981; text-decoration: underline; cursor: pointer; }
    
  .fade-out {
    opacity: 0;
    transition: opacity 0.5s ease-out;
  }


  </style>
</head>
<body>

  <h2>Upcoming Appointments</h2>

  <table>
    <thead>
      <tr>
        <th>No.</th>
        <th>Student</th>
        <th>Date</th>
        <th>Time</th>
        <th>Notes</th>
        <th>Documents</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody  id="appointments-body">
      <tr>
        <td>1</td>
        <td>Danish</td>
        <td>2/5/2025</td>
        <td>4:00pm – 6:00pm &nbsp;<button class="view-btn" onclick="changeTime(this)">Change</button></td>
        <td>Discuss final year project progress</td>
        <td><a class="doc-link" href="[VERIFIED] Diploma - CIT4224 Internet and Web PublishingTeaching Plan.pdf" target="_blank">View Document</a></td>
        <td><button class="view-btn" onclick="deleteAppointment(this)">Delete</button>
        </td>
      </tr>
      <tr>
        <td>2</td>
        <td>Wellson</td>
        <td>2/5/2025</td>
        <td>10:00am – 12:00pm &nbsp;<button class="view-btn" onclick="changeTime(this)">Change</button></td>
        <td>Discuss final year project progress</td>
        <td><a class="doc-link" href="[VERIFIED] Diploma - CIT4224 Internet and Web PublishingTeaching Plan.pdf" target="_blank">View Document</a></td>
        <td><button class="view-btn" onclick="deleteAppointment(this)">Delete</button>
        </td>
      </tr>
      <!-- Hidden "No appointments" row -->
    <tr id="empty-message" style="display: none;">
      <td colspan="7" style="text-align:center; color: #bbb;">There are currently no appointments.</td>
    </tr>
      <!-- Repeat rows as needed -->
    </tbody>
  </table>

  <script>
    function deleteAppointment(button) {
  if (confirm('Are you sure you want to delete this appointment?')) {
    const row = button.closest('tr');
    row.classList.add('fade-out');

    setTimeout(() => {
      row.remove();

      const tbody = document.getElementById('appointments-body');
      const rows = tbody.querySelectorAll('tr:not(#empty-message)');

      // Reorder numbering
      rows.forEach((tr, index) => {
        tr.querySelector('td').textContent = index + 1;
      });

      // Show "no appointments" if empty
      const emptyMessage = document.getElementById('empty-message');
      if (rows.length === 0) {
        emptyMessage.style.display = '';
      }

    }, 500);
  }
}
//----------------------------------------------------
function changeTime(button) {
  const cell = button.parentElement;
  const timeTextNode = cell.childNodes[0]; // the text node with time

  // Prevent opening multiple time inputs
  if (cell.querySelector('input[type="time"]')) return;

  const originalTimeText = timeTextNode.textContent.trim();

  // Remove everything except time text
  cell.innerHTML = `${originalTimeText} `;

  // Create time input fields
  const startInput = document.createElement('input');
  startInput.type = 'time';
  startInput.style.marginRight = '4px';

  const endInput = document.createElement('input');
  endInput.type = 'time';
  endInput.style.marginRight = '4px';

  // Create Save + Cancel buttons
  const saveBtn = document.createElement('button');
  saveBtn.textContent = 'Save';
  styleActionButton(saveBtn, '#10B981');

  const cancelBtn = document.createElement('button');
  cancelBtn.textContent = 'Cancel';
  styleActionButton(cancelBtn, '#EF4444');

  // Append new elements
  cell.appendChild(startInput);
  cell.appendChild(document.createTextNode(' – '));
  cell.appendChild(endInput);
  cell.appendChild(saveBtn);
  cell.appendChild(cancelBtn);

  // Save logic
  saveBtn.addEventListener('click', function() {
    if (startInput.value && endInput.value) {
      const start = startInput.value;
      const end = endInput.value;
      if (start >= end) {
        alert('End time must be later than start time.');
        return;
      }

      const formattedStart = formatTime(start);
      const formattedEnd = formatTime(end);

      cell.innerHTML = `${formattedStart} – ${formattedEnd} `;

      const changeBtn = document.createElement('button');
      changeBtn.textContent = 'Change';
      changeBtn.className = 'view-btn';
      changeBtn.onclick = function() { changeTime(this); };
      cell.appendChild(changeBtn);
    } else {
      alert('Please select both start and end time.');
    }
  });

  // Cancel logic
  cancelBtn.addEventListener('click', function() {
    cell.innerHTML = `${originalTimeText} `;
    const changeBtn = document.createElement('button');
    changeBtn.textContent = 'Change';
    changeBtn.className = 'view-btn';
    changeBtn.onclick = function() { changeTime(this); };
    cell.appendChild(changeBtn);
  });

  startInput.focus();
}

// Utility: style buttons
function styleActionButton(btn, color) {
  btn.style.background = color;
  btn.style.color = 'white';
  btn.style.border = 'none';
  btn.style.padding = '4px 8px';
  btn.style.marginRight = '4px';
  btn.style.borderRadius = '4px';
  btn.style.cursor = 'pointer';
}

// Utility: format 24h time to 12h am/pm
function formatTime(time24) {
  const [hourStr, minute] = time24.split(':');
  let hour = parseInt(hourStr);
  const ampm = hour >= 12 ? 'pm' : 'am';
  hour = hour % 12 || 12;
  return `${hour}:${minute}${ampm}`;
}



  </script>
  
  
  

</body>
</html>
